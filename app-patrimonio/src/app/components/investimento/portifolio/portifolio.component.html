<div class="d-flex">
    <button type="button" class="btn btn-light" (click)="adicionarCarteira()">Adicionar Carteira</button>
    <button type="button" class="btn btn-light" (click)="adicionarAtivo()">Adicionar Ativo</button>
    <button type="button" class="btn btn-light" (click)="atualizarCotacoes()">Atualizar Cotações</button>
</div>

<div>
    Carteira Status: {{carteiraStatus$ | async}}
    @if (carteiraError$ | async; as error) {
        <div class="error">{{error | json}}</div>
    }
</div>
<div>
    Ativo Status: {{ativoStatus$ | async}}
    @if (ativoError$ | async; as error) {
        <div class="error">{{error | json}}</div>
    }
</div>
<div>
    Cotação Status: {{cotacoesStatus$ | async}}
    @if (cotacoesError$ | async; as error) {
        <div class="error">{{error | json}}</div>
    }
</div>

@if ((cotacoes$ | async); as cotacoes) {
    @if (carteiras$ | async; as carteiras) {
    
        @for (carteira of carteiras ; track carteira.identity) {
            <div>
        
                <app-carteira-card [carteira]="carteira"
                    [carteiras]="carteiras"
                    [cotacoes]="cotacoes"
                    (onEditarCarteira)="editarCarteira($event)"
                    (onRemoverCarteira)="removerCarteira(carteira)"
                    (onOcultarCarteira)="ocultarCarteira(carteira)"
                    (onEditarCarteiraAtivo)="editarCarteiraAtivo($event)"
                    (onAdicionarCarteiraAtivo)="adicionarCarteiraAtivo($event)"
                    (onRemoverCarteiraAtivo)="removerCarteiraAtivo($event)"
                    />
            </div>

        }
    }
}


@if ((ativos$ | async); as itens) {
    <app-ativos-card [ativos]="itens"/>
}
